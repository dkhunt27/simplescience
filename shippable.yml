# Language setting
language: java

# Version number
jdk:
  - oraclejdk8

build:
  pre_ci_boot:
    image_name: myvinod/shipbuild
    image_tag: latest
    pull: true
    options: "-e HOME=/root"

  ci:
    - java -version
    - ls -l
    - ls -l target
  post_ci:
    #Commit the container only if you want all the artifacts from the CI step
    - docker commit $SHIPPABLE_CONTAINER_NAME myvinod/shippable:latest
    - docker push myvinod/shipbuild:$BUILD_NUMBER
    
before_script: 
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage

script:
  - mvn install cobertura:cobertura 

after_script:
  - ls -l
  - ls -l target
  
integrations:
  hub:
    - integrationName: mydockerhub
      type: docker
      branches:
        only:
          - master
